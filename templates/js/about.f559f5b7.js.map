{"version":3,"sources":["webpack:///./src/views/Test.vue?3334","webpack:///src/views/Test.vue","webpack:///./src/views/Test.vue?5e27","webpack:///./src/views/Test.vue","webpack:///./src/views/Graph.vue?a456","webpack:///src/views/Graph.vue","webpack:///./src/views/Graph.vue?6688","webpack:///./src/views/Graph.vue","webpack:///./src/views/Graph.vue?79ba"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","staticStyle","staticRenderFns","name","beforeCreate","window","_AMapSecurityConfig","securityJsCode","key","version","plugins","AMapUI","Loca","methods","initMap","map","AMap","Map","$refs","container","zoom","pitch","buildingAnimation","expandZoomRange","zooms","lang","features","plugin","toolbar","ToolBar","that","addControl","convertFrom","gps","status","result","info","lng","locations","lat","setCenter","marker","Marker","position","LngLat","add","component","attrs","nativeOn","$event","type","indexOf","_k","keyCode","sendMessage","model","value","callback","$$v","textarea","expression","graphOptions","onNodeClick","onLineClick","components","data","allowSwitchLineShape","allowSwitchJunctionPoint","defaultJunctionPoint","layouts","nodes","links","mounted","rootId","showSeeksGraph","__graph_json_data","seeksRelationGraph","setJsonData","console","log","nodeObject","lineObject","event","preventDefault","$axios"],"mappings":"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","file":"js/about.f559f5b7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"amap\",staticStyle:{\"width\":\"1000px\",\"height\":\"600px\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"amap\" ref=\"container\" style=\"width: 1000px; height: 600px\"></div>\n</template>\n<script>\nimport AMapLoader from \"@amap/amap-jsapi-loader\";\n\nexport default {\n  name: \"AMap\",\n  beforeCreate() {\n    window._AMapSecurityConfig = {\n      securityJsCode: \"d916527561290764f04b7284c408348f\",\n    };\n    AMapLoader.load({\n      key: \"49ff7cf3a2f52dafb09a6099ac289c22\", // 申请好的Web端开发者Key，首次调用 load 时必填\n      version: \"1.4.15\", // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n      plugins: [\"AMap.ToolBar\"], // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n      AMapUI: {\n        // 是否加载 AMapUI，缺省不加载\n        version: \"1.1\", // AMapUI 缺省 1.1\n        plugins: [], // 需要加载的 AMapUI ui插件\n      },\n      Loca: {\n        // 是否加载 Loca， 缺省不加载\n        version: \"1.3.2\", // Loca 版本，缺省 1.3.2\n      },\n    })\n      .then((AMap) => {\n        this.$nextTick(() => this.initMap(AMap));\n      })\n      .catch((e) => {\n        console.error(e);\n      });\n  },\n  methods: {\n    initMap(AMap) {\n      // this.map = new AMap.Map(\"container\");\n      // 或者使用 $refs 获取节点\n      this.map = new AMap.Map(this.$refs.container, {\n        zoom: 18,\n        pitch: 80, // 地图俯仰角度，有效范围 0 度- 83 度\n        // viewMode: \"3D\", // 地图模式\n        // terrain: true, // 开启地形图\n        // rotation: -15, // 地图顺时针旋转角度，取值范围 [0-360] ，默认值：0\n        buildingAnimation: true, //楼块出现是否带动画\n        expandZoomRange: true,\n        // center: [116.333926, 39.997245],\n        zooms: [3, 18], //地图显示的缩放级别范围\n        lang: \"zh_en\", //设置地图语言类型\n        features: [\"building\", \"bg\", \"point\"], // 设置地图上显示的元素种类\n      });\n\n      let that = this;\n      AMap.plugin(\"AMap.ToolBar\", function () {\n        //异步加载插件\n        var toolbar = new AMap.ToolBar();\n        that.map.addControl(toolbar);\n      });\n\n      let gps = [114.17891001918079, 22.303519892980272];\n      AMap.convertFrom(gps, \"gps\", function (status, result) {\n        if (result.info === \"ok\") {\n          var lng = result.locations[0].lng;\n          var lat = result.locations[0].lat;\n\n          that.map.setCenter([lng, lat]);\n\n          // 添加标记\n          var marker = new AMap.Marker({\n            position: new AMap.LngLat(lng, lat), // 经纬度\n          });\n\n          that.map.add(marker);\n        }\n      });\n\n      // AMap.plugin(\"AMap.Geocoder\", function () {\n      //   var geocoder = new AMap.Geocoder();\n      //   geocoder.getLocation(\"香港理工大学何鸿燊楼\", function (status, result) {\n      //     if (status === \"complete\" && result.info === \"OK\") {\n      //       // 经纬度\n      //       var lng = result.geocodes[0].location.lng;\n      //       var lat = result.geocodes[0].location.lat;\n\n      //       that.map.setCenter([lng, lat]);\n\n      //       // 添加标记\n      //       var marker = new AMap.Marker({\n      //         position: new AMap.LngLat(lng, lat), // 经纬度\n      //       });\n\n      //       that.map.add(marker);\n      //     } else {\n      //       console.log(\"定位失败！\");\n      //     }\n      //   });\n      // });\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Test.vue?vue&type=template&id=99d9027c&\"\nimport script from \"./Test.vue?vue&type=script&lang=js&\"\nexport * from \"./Test.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"graph-root\"}},[_c('div',{attrs:{\"id\":\"graph-input\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3,\"placeholder\":\"Please input the question\",\"resize\":\"none\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage($event)}},model:{value:(_vm.textarea),callback:function ($$v) {_vm.textarea=$$v},expression:\"textarea\"}})],1),_c('div',{attrs:{\"id\":\"graph-content\"}},[_c('RelationGraph',{ref:\"seeksRelationGraph\",staticStyle:{\"font-size\":\"20px\"},attrs:{\"options\":_vm.graphOptions,\"on-node-click\":_vm.onNodeClick,\"on-line-click\":_vm.onLineClick}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"graph-root\">\n    <div id=\"graph-input\">\n      <el-input\n        type=\"textarea\"\n        :rows=\"3\"\n        placeholder=\"Please input the question\"\n        v-model=\"textarea\"\n        resize=\"none\"\n        @keydown.enter.native=\"sendMessage($event)\"\n      >\n      </el-input>\n    </div>\n    <div id=\"graph-content\">\n      <RelationGraph\n        ref=\"seeksRelationGraph\"\n        :options=\"graphOptions\"\n        :on-node-click=\"onNodeClick\"\n        :on-line-click=\"onLineClick\"\n        style=\"font-size: 20px\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport RelationGraph from \"relation-graph\";\n\nexport default {\n  name: \"graph\",\n  components: { RelationGraph },\n  data() {\n    return {\n      textarea: \"\",\n      graphOptions: {\n        allowSwitchLineShape: true,\n        allowSwitchJunctionPoint: true,\n        defaultJunctionPoint: \"border\",\n        layouts: [\n          {\n            layoutName: \"force\",\n          },\n        ],\n      },\n      nodes: [],\n      links: [],\n    };\n  },\n  mounted() {\n    let __graph_json_data = {\n      rootId: \"空节点\",\n      nodes: [\n        {\n          id: \"空节点\",\n          text: \"空节点\",\n          color: \"#1167be\",\n          borderColor: \"#1167be\",\n          width: \"80\",\n          height: \"80\",\n        },\n      ],\n      links: [],\n      layouts: { layoutName: \"force\" },\n    };\n    this.showSeeksGraph(__graph_json_data);\n  },\n  methods: {\n    showSeeksGraph(__graph_json_data) {\n      this.$refs.seeksRelationGraph.setJsonData(\n        __graph_json_data,\n        (seeksRGGraph) => {\n          // Called when the relation-graph is completed\n        }\n      );\n    },\n    onNodeClick(nodeObject, $event) {\n      console.log(\"onNodeClick:\", nodeObject);\n    },\n    onLineClick(lineObject, $event) {\n      console.log(\"onLineClick:\", lineObject);\n    },\n    sendMessage(event) {\n      // 阻止默认事件\n      event.preventDefault();\n\n      let that = this;\n\n      let question = this.textarea;\n      // this.textarea = \"\";\n\n      // 将问题发给后端并返回答案\n      this.$axios\n        .post(\"http://127.0.0.1:5000/getGraph\", {\n          question: question,\n        })\n        .then((res) => {\n          let answer = res.data;\n          if (answer == \"NotFound\") {\n            that.$message({\n              showClose: true,\n              message: \"Answer Not Found!\",\n              type: \"warning\",\n              duration:1000,\n            });\n            console.log(answer);\n          } else {\n            let __graph_json_data = {\n              rootId: \"\",\n              nodes: [],\n              links: [],\n              layouts: { layoutName: \"force\" },\n            };\n\n            answer.forEach((elem) => {\n              let node = {\n                id: elem.entity,\n                text: elem.entity,\n                color: \"#1167be\",\n                borderColor: \"#1167be\",\n                width: \"50\",\n                height: \"50\",\n                innerHTML:\n                  '<div style=\"overflow: hidden;white-space: nowrap;text-overflow: ellipsis;line-height:50px;font-size:12px;border-radius:50%\">' +\n                  elem.entity +\n                  \"</div>\",\n              };\n              __graph_json_data.rootId = elem.entity;\n              __graph_json_data.nodes.push(node);\n\n              elem.object.forEach((oElem) => {\n                if (oElem instanceof Array) {\n                  oElem.forEach((objElem) => {\n                    let obNode = {\n                      id: objElem,\n                      color: \"#1167be\",\n                      borderColor: \"#1167be\",\n                      width: \"50\",\n                      height: \"50\",\n                      innerHTML:\n                        '<div style=\"overflow: hidden;white-space: nowrap;text-overflow: ellipsis;line-height:50px;font-size:12px;border-radius:50%\">' +\n                        objElem +\n                        \"</div>\",\n                    };\n\n                    let link = {\n                      from: elem.entity,\n                      to: objElem,\n                      text: elem.relation,\n                      color: \"#43a2f1\",\n                    };\n\n                    __graph_json_data.nodes.push(obNode);\n                    __graph_json_data.links.push(link);\n                  });\n                } else {\n                  let obNode = {\n                    id: oElem,\n                    width: \"50\",\n                    height: \"50\",\n                    color: \"#1167be\",\n                    borderColor: \"#1167be\",\n                    innerHTML:\n                      '<div style=\"overflow: hidden;white-space: nowrap;text-overflow: ellipsis;line-height:50px;font-size:12px;border-radius:50%\">' +\n                      oElem +\n                      \"</div>\",\n                  };\n\n                  let link = {\n                    from: elem.entity,\n                    to: oElem,\n                    text: elem.relation,\n                    color: \"#43a2f1\",\n                  };\n\n                  __graph_json_data.nodes.push(obNode);\n                  __graph_json_data.links.push(link);\n                }\n              });\n\n              this.showSeeksGraph(__graph_json_data);\n            });\n          }\n        });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n#graph-root {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  #graph-content {\n    width: 100%;\n    height: 90%;\n    #node {\n      font-size: 14px;\n      color: brown !important;\n      background: #1167be;\n      width: 50px;\n      height: 50px;\n      overflow: hidden;\n    }\n  }\n  #graph-input {\n    width: 100%;\n    height: 10%;\n    min-height: 100px;\n    box-sizing: border-box;\n    padding: 10px;\n    border-bottom: 1px solid #c7c7c7;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Graph.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Graph.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Graph.vue?vue&type=template&id=f4b09d58&scoped=true&\"\nimport script from \"./Graph.vue?vue&type=script&lang=js&\"\nexport * from \"./Graph.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Graph.vue?vue&type=style&index=0&id=f4b09d58&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f4b09d58\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Graph.vue?vue&type=style&index=0&id=f4b09d58&scoped=true&lang=less&\""],"sourceRoot":""}